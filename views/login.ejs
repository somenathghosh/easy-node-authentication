<!doctype html>
<html>
<head>
	<title>Authentication</title>
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
	<style>
		body 		{ padding-top:80px; }
	</style>
	
	<script language="Javascript">
			
		
		
		function preSubmit()
		{
			var email =	document.forms["loginForm"].elements["email"].value;
			var pass  =	document.forms["loginForm"].elements["password"].value;
			
			/* Checks for Employee Number */
			
			 /*Check for NULL Employee Number */
			
			if (email == null || trim(email) == "")
			{
				alert("Username is mandatory.");
				return false;
			}
			else
			{	
				
				var atpos=email.indexOf("@");
				var dotpos=email.lastIndexOf(".");
				if (atpos<1 || dotpos<atpos+2 || dotpos+2>=email.length)
				 {
				  alert("Not a valid e-mail address");
				  return false;
				 }
				else {
					var str = email.substring(atpos+1);
					if (str.toLowerCase() != "tcs.com")
					{
						alert("Not a valid tcs e-mail address");
						return false;
					}
				}
			}
			
			/* Check for NULL Password */
			
			if ( pass == null || trim(pass) == "")
			{
				alert(" Please enter password.");
				return false;
			}
            
            return true;
		}
		
		function trim(input)
		{
			while(input.charAt(0)==' ')
			input=input.substring(1,input.length);
			while(input.charAt(input.length-1)==' ')
			input=input.substring(0,input.length-1);

			return input;
		} 
		
		function submitForm()
        {
        
         
		   if (!preSubmit()){
		  
			return false;
			}
			else{
			 
			 return true;
			}
			
			
        }
		/*
		function myFunction(e)
		{
			e = (e) ? e : window.event;

			var charCode = false;
			if (e.which) {
				charCode = e.which;
			} else if (e.keyCode) {
				charCode = e.keyCode;
			}

			var shifton = false;
			if (e.shiftKey) {
				shifton = e.shiftKey;
			} else if (e.modifiers) {
				shifton = !!(e.modifiers & 4);
			}

			if (charCode >= 97 && charCode <= 122 && shifton) {
				return true;
			}

			if (charCode >= 65 && charCode <= 90 && !shifton) {
				return true;
			}
			
			alert("Caps Lock ON");
			return false;

		}
		*/
		
		function capLock(e){
			 kc = e.keyCode?e.keyCode:e.which;
			 sk = e.shiftKey?e.shiftKey:((kc == 16)?true:false);
			 if(((kc >= 65 && kc <= 90) && !sk)||((kc >= 97 && kc <= 122) && sk))
			  document.getElementById('divMayus').style.visibility = 'visible';
			 else
			   document.getElementById('divMayus').style.visibility = 'hidden';
		}
	</script>


</head>
<body>
<div class="container">
<div class="col-sm-6 col-sm-offset-3">
	
	<h1><span class="fa fa-sign-in"></span> Login</h1>

	<% if (message.length > 0) { %>
		<div class="alert alert-danger"><%= message %></div>
	<% } %>

	<!-- LOGIN FORM -->
	<form name="loginForm" action="/login"  method="post" onSubmit="return submitForm();">
		<div class="form-group">
			<label>Email</label>
			<input type="text" class="form-control" name="email">
		</div>
		<div class="form-group">
			<label>Password</label>
			<input type="password" class="form-control" name="password" onkeypress="capLock(event)" />
			<div id="divMayus" style="visibility:hidden">Caps Lock is on.</div> 
		</div>

		<button type="submit" class="btn btn-warning btn-lg">Login</button>
	</form>

	<hr>

	<p>Need an account? <a href="/signup">Signup</a></p>
	<p>Or go <a href="/">home</a>.</p>

	

</div>
</div>
</body>
</html>